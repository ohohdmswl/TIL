
## 쿠버네티스 vs 도커
#쿠버네티스 #도커 
- 참고
	- [공식 문서](https://kubernetes.io/ko/docs/setup/)
	- [쿠버네티스는 무엇일까? (도커와 쿠버네티스의 차이)](https://velog.io/@yunuchoiii/%EC%BF%A0%EB%B2%84%EB%84%A4%ED%8B%B0%EC%8A%A4%EB%8A%94-%EB%AC%B4%EC%97%87%EC%9D%BC%EA%B9%8C-%EB%8F%84%EC%BB%A4%EC%99%80-%EC%BF%A0%EB%B2%84%EB%84%A4%ED%8B%B0%EC%8A%A4%EC%9D%98-%EC%B0%A8%EC%9D%B4)
	- [ 쿠버네티스 알아보기 1편: 쿠버네티스와 컨테이너, 도커에 대한 기본 개념](https://www.samsungsds.com/kr/insights/220222_kubernetes1.html)
	- [쿠버네티스 알아보기 2편: 쿠버네티스를 만나는 여러 가지 방법](https://www.samsungsds.com/kr/insights/kubernetes-2.html)

### 💻 용어정리
- 🚩 **컨테이너**
	- 앱이 구동되는 환경까지 감싸 실행 가능하도록 하는 격리 기술
	- 어디서든 쉽게 실행 할 수 있도록 해주는 기술
	- 컨테이너 이미지 내려받아 구동하면 실행됨
- 🚩 **컨테이너 이미지**
	- 컨테이너 환경을 묶어서 배포한 것
- 🚩 **컨테이너 런타임**
	- 컨테이너를 다루는 도구(컨테이너 사용시 필요한 도구)
	- 컨테이너를 쉽게 내려받거나 공유, 구동하게 해주는 도구
- 🚩 **도커**
	- 컨테이너 다루는 도구 중 가장 유명한 것
- 🚩 **쿠버네티스**
	- 컨테이너 런타임 통해 컨테이너를 오케스트레이션 하는 도구
	- 여러 서버(노드)에 컨테이너 분산해서 배치, 문제 생긴 컨테이너 교체, 컨테이너가 사용할 비밀번호 또는 환경설정 관리하고 주입하는 일 등
	- 도커 이외에도 다양한 컨테이너 런타임 SW 사용 가능
- 🚩 **오케스트레이션**
	- 여러 서버에 걸친 컨테이너 및 사용하는 환경 설정을 관리하는 행위


###  💻 애플리케이션 배포 환경의 변화
![image](https://github.com/ohohdmswl/TIL/assets/132552661/4b2acaca-76e0-4652-9750-07569dd0ac56)


<h4>📌 전통적 배포(Traditional Deployment)</h4>

- 물리적인 컴 한 대에 필요 OS, 프로그램 설치
- 성능 감소 이슈 발생


<h4>📌 가상화 배포(Virtualized Deployment)</h4>

- 가상머신 기반으로 배포(Virtual Machine)
- 하나의 컴 안에서 여러개의 가상화된 컴이 동작하기 때문에 서로 간섭 X
- 다중화, 분산처리 중요한 시스템일 경우 시스템 자원 상황따라 가상머신 개수 증감을 유연하게 처리 가능
- 가상머신은 완전한 컴이고 가상머신에 일일이 OS를 설치해야하므로 컨테이너 중심의 배포보단 무거움
-  🚩 **가상머신**
	- 가상 컴퓨터
	- 가상 "컴퓨터"이기 때문에 CPU, 메모리 등 할당 가능
- 🚩 **하이퍼바이저(Hypervisor)**
	- 하나의 시스템 상에서 가상 컴퓨터를 여러 개 구동할 수 있도록 해주는 중간 계층
- 🚩 **앱(App)**
	- 실행하고자 하는 프로그램
- 🚩 **Bin/Library**
	- 프로그램이 실행하는데 필요한 환경과 관련된 파일

<h4>📌 컨테이너 중심의 배포(Container Deployment)</h4>

- 하이퍼바이저 → Container Runtime
- Virtual Machine → Container
- 🚩 **컨테이너**
	- 가상머신과 달리 프로그램 구동 위해 OS 매번 설치 필요 X → 하나의 OS 사용
- 컨테이너는 OS하단의 동작 관심 X
- 가상머신 위에 올라간 OS에서 컨테이너 기반 배포 가능 → 꼭 물리적인 컴 위에서만 유효한것은 아님
- 여러 프로그램이 실행되어도 해당 컴에서 해당 프로그램만 구동되고 있다고 인식하도록 장벽을 친다
- 그로 인해 각 프로그램이 필요한 자원을 독립적으로 할당, 관리
- OS 커널을 공유하는 가상화
- 컨테이너 → OS 공유 → 어떤 프로그램의 문제가 다른 프로그램 간섭 불가 
- BUT 내 프로그램의 문제가 OS에 문제 일으키면 OS에 구동중인 전체 컨테이너 문제 발생 가능

![image](https://github.com/ohohdmswl/TIL/assets/132552661/362cf260-39cb-47fe-92fb-604da07e04a7)


<hr>

### 💻 쿠버네티스 구성 방법(자동 설치)
<br>

#### 📌 미니쿠브 (Minikube)
- 개발 용도 적합
- made by SIG
- 로컬 시스템에 쉽게 설치 가능
- 리눅스, 맥, 윈도우 지원
- 각 OS 지원하는 패키지 매니저 활용해 편리하게 설치 가능
- 쿠버네티스가 제공하는 대부분 기능 활용 가능
- 인텔리제이와 같은 개발 도구와 미니쿠브 연계해 쿠버네티스 상 동작 결과 바로 확인 가능
- 로컬에 설치되어 단일 노드 형태로 동작
- 다중 노드 구성 작업시에는 힘듦
- 노드를 가상화된 형태로 생성하기에 도커, 버주얼박스등 가상화 도구가 추가로 필요로함
- 용도) 간단한 학습 및 개발 환경 구성 가능
- 장) 쉬운 설치, 개발 도구와의 편한 연계
- 단) 단일 노드만 지원, 추가 가상화 도구 필요
<br>


#### 📌 k3s
- 실질적으로 활용가능한 쿠버네티스 클러스터 구성시 리소스가 충분하지 않을 경우 사용
- made by 랜처랩스, CNCF의 샌드박스(초기단계) 프로젝트로 육성중
- 경량의 쿠버네티스 배포판
- 단일 파일로 이루어진 k3s 실행파일 통해 서버와 에이전트만 구동하면 쿠버네티스 각 구성요소가 간편하게 설치 → 쿠버네티스 클러스터 쉽게 구성 가능
- **ETCD**
	- 쿠버네티스의 각종 환경 정보를 저장하는 내장 구성요소
	- 경량의 내장 데이터베이스인 SQlite로 대체되어 가볍게 동작
- 사물인터넷(IoT) 또는 라즈베리파이 같은 학습용 초소형 컴에서도 사용 가능
- 소규모 운영 환경 적용 가능하지만 구성요소가 단순화되어 높은 성능과 안정성을 요구하는 시스템에는 부적합
- 용도) 쿠버네티스와 완전히 호환되는 가벼운 배포판
- 장) 쉬운 설치, 시스템 리소스를 적게 사용하며 높은 쿠버네티스의 호환성을 보장
- 단) 단순한 구조, 높은 성능과 안정성을 요구하는 시스템은 부적합
<br>

#### 📌 랜처(Rancher)
- 대규모 환경에 적합, 기업용 환경 적합
- made by 랜처랩스
- 무료 ver + 상용 ver (두가지)
- 쿠버네티스 클러스터 뿐 아니라 운영에 필요한 모니터링, 보안관련 기능 쉽게 설치 가능
- 추가 기능 필요시 랜처가 제공하는 마켓 플레이스에서 관련도구 설치, 구성 가능
- 랜처 관리 도구 사용해 새로운 쿠버네티스 클러스터를 쉽게 생성하고 여러 클러스터 한곳에서 관리 가능
- 퍼블릭 클라우드(AWS, Azure, GCP..) 와 프라이빗 클라우드 구분없이 설치 가능 → 멀티 클라우드 환경 구성 가능
- 자체적인 구성요소 많이 포함됨 → 무거움
- 중소 규모의 단일 클러스터는 이를 구성해주는 다른 도구를 사용, 모니터링과 대시보드 쉽게 설정해주는 추가 기능을 활용 추천
- 용도) 대규모 및 기업용 환경에서 활용 가능한 다목적 쿠버네티스 관리 플랫폼
- 장) 기본적으로 포함되어 있는 기능이 많고 추가 도구 설치 쉬움, 멀티클라우드 관리 가능
- 단) 무거움, 시스템 환경 따라 적절한 고려 필요


<br>
<hr>


### 💻 쿠버네티스 구성 방법(시스템상 구성)
<br>

#### 📌 kubeadm
- 기본적인 상태의 쿠버네티스를 시스템상에 구성해주는 도구
- 사용자가 기본적인 쿠버네티스 구성 이외 운영에 필요한 서비스, 스토리지, 모니터링 등 세부 구성요소 직접 설정 필요


>
<hr>


### 💻 쿠버네티스 구성 방법(클라우드 서비스)
<br>

#### 📌 매니지드 쿠버네티스 서비스
- 퍼블릭 클라우드에서 제공하는 서비스
- 사용자가 쿠버네티스 설치하는 부담 없이 퍼블릭 클라우드 서비스에서 제공하는 콘솔 지시사항 따라 쿠버네티스 클러스터 생성 가능
- 생성된 클러스터 관리 가능
- 제공하는 퍼블릭 클라우드 : AWS(EKS), Azure(AKS), GCP(GKE)